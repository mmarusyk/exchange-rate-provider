{
  "openapi": "3.0.1",
  "info": {
    "title": "Exchange Rate Provider API",
    "version": "v1",
    "description": "API for retrieving exchange rates."
  },
  "servers": [
    {
      "url": "{defaultHost}",
      "variables": {
        "defaultHost": {
          "default": "http://localhost:3000"
        }
      }
    }
  ],
  "paths": {
    "/api/v1/exchange_rates": {
      "get": {
        "summary": "Lists exchange rates",
        "tags": [
          "Exchange Rates"
        ],
        "description": "Retrieves exchange rates based on source currency",
        "parameters": [
          {
            "name": "source_currency",
            "in": "query",
            "required": true,
            "schema": {
              "pattern": "^[A-Z]{3}$",
              "default": "CZK"
            }
          },
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "target_currency[]",
            "in": "query",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^[A-Z]{3}$"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "examples": {
                  "with basic parameters OK returns a 200 response": {
                    "value": [
                      {
                        "target_currency": "AUD",
                        "amount": 1.0,
                        "rate": 14.001,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "BRL",
                        "amount": 1.0,
                        "rate": 3.904,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "BGN",
                        "amount": 1.0,
                        "rate": 12.747,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "CNY",
                        "amount": 1.0,
                        "rate": 3.015,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "DKK",
                        "amount": 1.0,
                        "rate": 3.34,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "EUR",
                        "amount": 1.0,
                        "rate": 24.93,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "PHP",
                        "amount": 100.0,
                        "rate": 39.21,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "HKD",
                        "amount": 1.0,
                        "rate": 2.824,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "INR",
                        "amount": 100.0,
                        "rate": 25.91,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "IDR",
                        "amount": 1000.0,
                        "rate": 1.32,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "ISK",
                        "amount": 100.0,
                        "rate": 17.087,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "ILS",
                        "amount": 1.0,
                        "rate": 6.033,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "JPY",
                        "amount": 100.0,
                        "rate": 15.329,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "ZAR",
                        "amount": 1.0,
                        "rate": 1.179,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "CAD",
                        "amount": 1.0,
                        "rate": 15.843,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "KRW",
                        "amount": 100.0,
                        "rate": 1.54,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "HUF",
                        "amount": 100.0,
                        "rate": 6.168,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "MYR",
                        "amount": 1.0,
                        "rate": 5.076,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "MXN",
                        "amount": 1.0,
                        "rate": 1.121,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "XDR",
                        "amount": 1.0,
                        "rate": 29.727,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "NOK",
                        "amount": 1.0,
                        "rate": 2.112,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "NZD",
                        "amount": 1.0,
                        "rate": 12.966,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "PLN",
                        "amount": 1.0,
                        "rate": 5.834,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "RON",
                        "amount": 1.0,
                        "rate": 5.007,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "SGD",
                        "amount": 1.0,
                        "rate": 16.772,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "SEK",
                        "amount": 1.0,
                        "rate": 2.272,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "CHF",
                        "amount": 1.0,
                        "rate": 26.559,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "THB",
                        "amount": 100.0,
                        "rate": 65.535,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "TRY",
                        "amount": 100.0,
                        "rate": 56.938,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "USD",
                        "amount": 1.0,
                        "rate": 21.905,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "GBP",
                        "amount": 1.0,
                        "rate": 29.266,
                        "source_currency": "CZK"
                      }
                    ]
                  },
                  "with target currency filter OK returns a 200 response": {
                    "value": [
                      {
                        "target_currency": "EUR",
                        "amount": 1.0,
                        "rate": 24.93,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "USD",
                        "amount": 1.0,
                        "rate": 21.905,
                        "source_currency": "CZK"
                      }
                    ]
                  },
                  "with date parameter OK returns a 200 response": {
                    "value": [
                      {
                        "target_currency": "AUD",
                        "amount": 1.0,
                        "rate": 14.715,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "BRL",
                        "amount": 1.0,
                        "rate": 3.983,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "BGN",
                        "amount": 1.0,
                        "rate": 12.814,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "CNY",
                        "amount": 1.0,
                        "rate": 3.227,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "DKK",
                        "amount": 1.0,
                        "rate": 3.363,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "EUR",
                        "amount": 1.0,
                        "rate": 25.085,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "PHP",
                        "amount": 100.0,
                        "rate": 40.833,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "HKD",
                        "amount": 1.0,
                        "rate": 3.016,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "INR",
                        "amount": 100.0,
                        "rate": 26.928,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "IDR",
                        "amount": 1000.0,
                        "rate": 1.437,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "ISK",
                        "amount": 100.0,
                        "rate": 17.123,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "ILS",
                        "amount": 1.0,
                        "rate": 6.464,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "JPY",
                        "amount": 100.0,
                        "rate": 15.662,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "ZAR",
                        "amount": 1.0,
                        "rate": 1.269,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "CAD",
                        "amount": 1.0,
                        "rate": 16.277,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "KRW",
                        "amount": 100.0,
                        "rate": 1.616,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "HUF",
                        "amount": 100.0,
                        "rate": 6.29,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "MYR",
                        "amount": 1.0,
                        "rate": 5.292,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "MXN",
                        "amount": 1.0,
                        "rate": 1.14,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "XDR",
                        "amount": 1.0,
                        "rate": 30.878,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "NOK",
                        "amount": 1.0,
                        "rate": 2.124,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "NZD",
                        "amount": 1.0,
                        "rate": 13.31,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "PLN",
                        "amount": 1.0,
                        "rate": 6.037,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "RON",
                        "amount": 1.0,
                        "rate": 5.041,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "SGD",
                        "amount": 1.0,
                        "rate": 17.526,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "SEK",
                        "amount": 1.0,
                        "rate": 2.278,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "CHF",
                        "amount": 1.0,
                        "rate": 26.341,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "THB",
                        "amount": 100.0,
                        "rate": 69.661,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "TRY",
                        "amount": 100.0,
                        "rate": 64.322,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "USD",
                        "amount": 1.0,
                        "rate": 23.44,
                        "source_currency": "CZK"
                      },
                      {
                        "target_currency": "GBP",
                        "amount": 1.0,
                        "rate": 30.02,
                        "source_currency": "CZK"
                      }
                    ]
                  },
                  "with unsupported source currency OK returns a 200 response": {
                    "value": []
                  }
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Content",
            "content": {
              "application/json": {
                "examples": {
                  "with invalid source currency format Unprocessable Content returns a 422 response": {
                    "value": {
                      "errors": {
                        "source_currency": [
                          "is in invalid format"
                        ]
                      }
                    }
                  },
                  "with invalid target currency format Unprocessable Content returns a 422 response": {
                    "value": {
                      "errors": {
                        "target_currency": {
                          "0": [
                            "is in invalid format"
                          ]
                        }
                      }
                    }
                  },
                  "with invalid date format Unprocessable Content returns a 422 response": {
                    "value": {
                      "errors": {
                        "date": [
                          "is in invalid format"
                        ]
                      }
                    }
                  },
                  "when external server returns an error Unprocessable Content returns a 422 response": {
                    "value": {
                      "errors": {
                        "base": [
                          "API request failed with status 400"
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}